<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ë—Ä–∏—Ñ - –¢–ï–°–¢</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
body{background:#f5f7fa;padding:20px}
.container{max-width:500px;margin:0 auto;background:#fff;border-radius:16px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.05)}
h1{font-size:24px;margin-bottom:8px;text-align:center}
.subtitle{text-align:center;color:#666;margin-bottom:24px;font-size:14px}
.form-group{margin-bottom:16px}
label{display:block;margin-bottom:6px;font-weight:500;font-size:14px}
input,select,textarea{width:100%;padding:12px;border:2px solid #e9ecef;border-radius:10px;font-size:16px}
input:focus,select:focus,textarea:focus{outline:none;border-color:#2AABEE}
textarea{min-height:80px;resize:vertical}
button{width:100%;padding:16px;background:#2AABEE;color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;margin-top:12px}
button:disabled{background:#ccc;cursor:not-allowed}
.debug{background:#fff3cd;padding:10px;border-radius:8px;margin-top:10px;font-size:12px;font-family:monospace;word-break:break-all}
</style>
</head>
<body>
<div class="container">
<h1>üìã –ë—Ä–∏—Ñ (–¢–ï–°–¢)</h1>
<div class="subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É</div>

<div class="form-group">
<label>–°—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</label>
<select id="sphere">
<option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
<option value="–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</option>
<option value="IT">IT</option>
<option value="–î–∏–∑–∞–π–Ω">–î–∏–∑–∞–π–Ω</option>
</select>
</div>

<div class="form-group">
<label>–ë—é–¥–∂–µ—Ç</label>
<select id="budget">
<option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
<option value="–î–æ 50–∫">–î–æ 50–∫</option>
<option value="50-150–∫">50-150–∫</option>
<option value="150-500–∫">150-500–∫</option>
</select>
</div>

<div class="form-group">
<label>–°—Ä–æ–∫–∏</label>
<select id="timeline">
<option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
<option value="1-2 –Ω–µ–¥–µ–ª–∏">1-2 –Ω–µ–¥–µ–ª–∏</option>
<option value="1 –º–µ—Å—è—Ü">1 –º–µ—Å—è—Ü</option>
<option value="2-3 –º–µ—Å—è—Ü–∞">2-3 –º–µ—Å—è—Ü–∞</option>
</select>
</div>

<div class="form-group">
<label>–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</label>
<textarea id="details" placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É..."></textarea>
</div>

<div class="form-group">
<label>–í–∞—à–µ –∏–º—è</label>
<input type="text" id="name" placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?">
</div>

<div class="form-group">
<label>–ö–æ–Ω—Ç–∞–∫—Ç</label>
<input type="text" id="contact" placeholder="@username –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω">
</div>

<button id="sendBtn" onclick="send()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

<div class="debug" id="debug">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</div>

<script>
let tg = window.Telegram.WebApp;
let debugEl = document.getElementById('debug');

function log(msg) {
  debugEl.innerHTML += msg + '<br>';
  console.log(msg);
}

log('‚úÖ Script loaded');

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Telegram WebApp
if (typeof tg === 'undefined') {
  log('‚ùå Telegram WebApp –Ω–µ –Ω–∞–π–¥–µ–Ω!');
} else {
  log('‚úÖ Telegram WebApp –Ω–∞–π–¥–µ–Ω');
  
  try {
    tg.ready();
    log('‚úÖ tg.ready() –≤—ã–ø–æ–ª–Ω–µ–Ω');
    
    tg.expand();
    log('‚úÖ tg.expand() –≤—ã–ø–æ–ª–Ω–µ–Ω');
    
    log(`üÜî User ID: ${tg.initDataUnsafe?.user?.id || 'N/A'}`);
    log(`üë§ Username: ${tg.initDataUnsafe?.user?.username || 'N/A'}`);
    
  } catch(e) {
    log('‚ùå –û—à–∏–±–∫–∞ init: ' + e.message);
  }
}

function send() {
  log('üîµ –ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞');
  
  const data = {
    sphere: document.getElementById('sphere').value,
    budget: document.getElementById('budget').value,
    timeline: document.getElementById('timeline').value,
    details: document.getElementById('details').value.trim(),
    name: document.getElementById('name').value.trim(),
    contact: document.getElementById('contact').value.trim()
  };
  
  log('üì¶ –î–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã: ' + JSON.stringify(data));
  
  try {
    const jsonStr = JSON.stringify(data);
    log('üîÑ JSON –¥–ª–∏–Ω–∞: ' + jsonStr.length);
    
    if (typeof tg.sendData === 'function') {
      log('‚úÖ tg.sendData —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
      tg.sendData(jsonStr);
      log('‚úÖ tg.sendData() –≤—ã–∑–≤–∞–Ω!');
    } else {
      log('‚ùå tg.sendData –ù–ï –§–£–ù–ö–¶–ò–Ø!');
    }
    
  } catch(e) {
    log('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ' + e.message);
  }
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å sendData
setTimeout(() => {
  if (typeof tg.sendData === 'function') {
    log('‚úÖ sendData –¥–æ—Å—Ç—É–ø–µ–Ω');
  } else {
    log('‚ùå sendData –ù–ï –î–û–°–¢–£–ü–ï–ù');
  }
}, 1000);
</script>
</body>
</html>
